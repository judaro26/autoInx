# netlify.toml

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

# Existing Schedule for user cleanup
[functions.anonymousUserCron]
  schedule = "0 3 * * *"

[functions.deleteOrder]
  included_files = ["./netlify/functions/ip-data.json"]

# Dynamic Chat Widget Schedule
[functions.toggleChatWidget]
  function = "toggleChatWidget"
  schedule = "0 * * * *" 

# Public function for Google Maps
[functions.getGoogleMapsKey]
  access = "public"

# --- NEW: Receipt Confirmation & PDF Generation ---
[functions."sendReceiptConfirmation"]
  # This ensures the HTML templates are uploaded with the javascript code
  included_files = ["netlify/functions/sendReceiptConfirmation/emailTemplates/*.html"]
  # Increased timeout for the external API call (Doppio)
  timeout = 25
